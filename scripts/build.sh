#!/bin/bash

# ุณูุฑูุจุช ุจูุงุก ููุดุฑ ุชุทุจูู Expo React Native

echo "๐ ุจุฏุก ุนูููุฉ ุงูุจูุงุก ูุงููุดุฑ..."

# ุงูุชุญูู ูู ูุฌูุฏ Node.js
if ! command -v node &> /dev/null; then
    echo "โ Node.js ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Node.js ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ npm
if ! command -v npm &> /dev/null; then
    echo "โ npm ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช npm ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ Expo CLI
if ! command -v expo &> /dev/null; then
    echo "๐ฆ ุชุซุจูุช Expo CLI..."
    npm install -g @expo/cli
fi

# ุชุซุจูุช ุงูุชุจุนูุงุช
echo "๐ฆ ุชุซุจูุช ุงูุชุจุนูุงุช..."
npm install

# ุงูุชุญูู ูู ุงูุฃุฎุทุงุก
echo "๐ ูุญุต ุงูุฃุฎุทุงุก..."
npm run lint 2>/dev/null || echo "โ๏ธ  ูุง ููุฌุฏ ุณูุฑูุจุช lint"

# ุจูุงุก ููููุจ
echo "๐ ุจูุงุก ููููุจ..."
npm run web

# ุจูุงุก ููุฃูุฏุฑููุฏ (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุจูุงุก ููุฃูุฏุฑููุฏุ (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "๐ค ุจูุงุก ููุฃูุฏุฑููุฏ..."
    expo build:android
fi

# ุจูุงุก ููู iOS (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุจูุงุก ููู iOSุ (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "๐ ุจูุงุก ููู iOS..."
    expo build:ios
fi

echo "โ ุชู ุงูุงูุชูุงุก ูู ุนูููุฉ ุงูุจูุงุก!"
echo "๐ฑ ููููู ุงูุขู ูุดุฑ ุงูุชุทุจูู ุนูู ุงููุชุงุฌุฑ ุฃู ุชุดุบููู ูุญููุงู." 